FUNCTION "FC_LAC001_HVP Conveyors" : VOID
TITLE =LAC001 - HVP Conveyors
AUTHOR : Generat
VERSION : 0.0


VAR_TEMP
  dummy : BOOL ;	
END_VAR
BEGIN
NETWORK
TITLE =1100 - Operating Mode HVP Conveyors

      CALL "FB_1010_Mode" , "IDB_1100" (
           IW_LacNo                 := 1,
           QX_Auto                  := "IDB_1100".QX_Auto,
           QX_Man                   := "IDB_1100".QX_Man,
           QX_Off                   := "IDB_1100".QX_Off,
           QX_Ack                   := "IDB_1100".QX_Ack,
           QX_SumErrLac             := "IDB_1100".QX_SumErrLac,
           QX_SumMsgLac             := "IDB_1100".QX_SumMsgLac,
           QX_StartUpAuto           := "IDB_1100".QX_StartUpAuto,
           QX_TrspStopped           := "IDB_1100".QX_TrspStopped,
           QX_ReqOffAct             := "IDB_1100".QX_ReqOffAct,
           QX_Msg                   := "IDB_1100".QX_Msg,
           QX_Err                   := "IDB_1100".QX_Err);

      NOP   0; 
NETWORK
TITLE =1111 - MT Conveyor Module 1111
// ProductID: KRC
// Power-Bus: 1SB12
      A     "1111_ix_StpFr"; 
      =     L      1.0; 
      BLD   103; 
      A     "1111_ix_MtSw"; 
      =     L      1.4; 
      BLD   103; 
      A     "1111_ix_CcRdy"; 
      =     L      1.5; 
      BLD   103; 
      AN    "IDB_1112".QX_StatDrvFwd; 
      A     "1111_ix_StpFr"; 
      =     L      2.2; 
      BLD   103; 
      A     "State_1"; 
      =     L      2.3; 
      BLD   103; 
      CALL "FB_1600_ConvMultiKdr" , "IDB_1111" (
           IW_HsFro                 := 1,
           iw_CtlToPlc              := "1111_iw_CtlToPlc",
           ix_StpFr                 := L      1.0,
           ix_MtSw                  := L      1.4,
           ix_CcRdy                 := L      1.5,
           IX_Lock                  := L      2.2,
           IX_ResetESM              := L      2.3,
           qd_PlcToCtl              := "1111_qd_PlcToCtl",
           QX_StatDrvFwd            := "IDB_1111".QX_StatDrvFwd,
           QX_StatDrvBwd            := "IDB_1111".QX_StatDrvBwd,
           QX_TORdy                 := "IDB_1111".QX_TORdy,
           QX_HORdy                 := "IDB_1111".QX_HORdy,
           QW_FillLvl               := "IDB_1111".QW_FillLvl,
           QX_TrspActive            := "IDB_1111".QX_TrspActive,
           QX_TrspFro               := "IDB_1111".QX_TrspFro,
           QX_Msg                   := "IDB_1111".QX_Msg,
           QX_Err                   := "IDB_1111".QX_Err);
      NOP   0; 
NETWORK
TITLE =1112 - MT Conveyor Module 1112
// ProductID: KRC
// Power-Bus: 1SB12
      A     "1112_ix_StpFr"; 
      =     L      1.0; 
      BLD   103; 
      A     "1112_ix_MtSw"; 
      =     L      1.4; 
      BLD   103; 
      A     "1112_ix_CcRdy"; 
      =     L      1.5; 
      BLD   103; 
      AN    "IDB_1113".QX_StatDrvFwd; 
      A     "1112_ix_StpFr"; 
      =     L      2.2; 
      BLD   103; 
      A     "State_1"; 
      =     L      2.3; 
      BLD   103; 
      CALL "FB_1600_ConvMultiKdr" , "IDB_1112" (
           IW_HsFro                 := 1,
           iw_CtlToPlc              := "1112_iw_CtlToPlc",
           ix_StpFr                 := L      1.0,
           ix_MtSw                  := L      1.4,
           ix_CcRdy                 := L      1.5,
           IX_Lock                  := L      2.2,
           IX_ResetESM              := L      2.3,
           qd_PlcToCtl              := "1112_qd_PlcToCtl",
           QX_StatDrvFwd            := "IDB_1112".QX_StatDrvFwd,
           QX_StatDrvBwd            := "IDB_1112".QX_StatDrvBwd,
           QX_TORdy                 := "IDB_1112".QX_TORdy,
           QX_HORdy                 := "IDB_1112".QX_HORdy,
           QW_FillLvl               := "IDB_1112".QW_FillLvl,
           QX_TrspActive            := "IDB_1112".QX_TrspActive,
           QX_TrspFro               := "IDB_1112".QX_TrspFro,
           QX_Msg                   := "IDB_1112".QX_Msg,
           QX_Err                   := "IDB_1112".QX_Err);
      NOP   0; 
NETWORK
TITLE =1113 - MT Conveyor Module 1113
// ProductID: KRC
// Power-Bus: 1SB12
      A     "1113_ix_StpFr"; 
      =     L      1.0; 
      BLD   103; 
      A     "1113_ix_MtSw"; 
      =     L      1.4; 
      BLD   103; 
      A     "1113_ix_CcRdy"; 
      =     L      1.5; 
      BLD   103; 
      AN    "IDB_1115".QX_StatDrvFwd; 
      A     "1113_ix_StpFr"; 
      =     L      2.2; 
      BLD   103; 
      A     "State_1"; 
      =     L      2.3; 
      BLD   103; 
      CALL "FB_1600_ConvMultiKdr" , "IDB_1113" (
           IW_HsFro                 := 1,
           iw_CtlToPlc              := "1113_iw_CtlToPlc",
           ix_StpFr                 := L      1.0,
           ix_MtSw                  := L      1.4,
           ix_CcRdy                 := L      1.5,
           IX_Lock                  := L      2.2,
           IX_ResetESM              := L      2.3,
           qd_PlcToCtl              := "1113_qd_PlcToCtl",
           QX_StatDrvFwd            := "IDB_1113".QX_StatDrvFwd,
           QX_StatDrvBwd            := "IDB_1113".QX_StatDrvBwd,
           QX_TORdy                 := "IDB_1113".QX_TORdy,
           QX_HORdy                 := "IDB_1113".QX_HORdy,
           QW_FillLvl               := "IDB_1113".QW_FillLvl,
           QX_TrspActive            := "IDB_1113".QX_TrspActive,
           QX_TrspFro               := "IDB_1113".QX_TrspFro,
           QX_Msg                   := "IDB_1113".QX_Msg,
           QX_Err                   := "IDB_1113".QX_Err);
      NOP   0; 
NETWORK
TITLE =1115 - Belt Conveyor Module 1115
// ProductID: GF
// Power-Bus: 1SB12
      A     "=F101+1115-B4033:4"; 
      =     L      1.0; 
      BLD   103; 
      A     "IDB_1115".ix_DrvRdy; 
      =     L      1.3; 
      BLD   103; 
      A     "=F101+1115-U4000-Q1:14"; 
      =     L      1.4; 
      BLD   103; 
      A     "1113_ix_StpFr"; 
      =     L      2.1; 
      BLD   103; 
      AN    "IDB_1117".QX_StatDrvFwd; 
      A     "=F101+1115-B4033:4"; 
      =     L      2.4; 
      BLD   103; 
      CALL "FB_1400_ConvMulti" , "IDB_1115" (
           IW_HsFro                 := 1,
           ix_StpFr                 := L      1.0,
           ix_DrvRdy                := L      1.3,
           ix_MtSw                  := L      1.4,
           IX_ResetESM              := L      2.1,
           IX_Lock                  := L      2.4,
           qx_DrvCtl1               := "IDB_1115".qx_DrvCtl1,
           qx_DrvCtl2               := "IDB_1115".qx_DrvCtl2,
           qx_DrvCtl3               := "IDB_1115".qx_DrvCtl3,
           qx_DrvCtl4               := "IDB_1115".qx_DrvCtl4,
           QX_StatDrvFwd            := "IDB_1115".QX_StatDrvFwd,
           QX_StatDrvBwd            := "IDB_1115".QX_StatDrvBwd,
           QX_TORdy                 := "IDB_1115".QX_TORdy,
           QX_HORdy                 := "IDB_1115".QX_HORdy,
           QX_TrspActive            := "IDB_1115".QX_TrspActive,
           QX_TrspFro               := "IDB_1115".QX_TrspFro,
           QX_Msg                   := "IDB_1115".QX_Msg,
           QX_Err                   := "IDB_1115".QX_Err);

      NOP   0; 
NETWORK
TITLE =1115 - SEW interface

      A     "IDB_1115".qx_DrvCtl1; 
      =     L      1.0; 
      BLD   103; 
      A     "IDB_1115".qx_DrvCtl2; 
      =     L      1.1; 
      BLD   103; 
      A     "State_1"; 
      =     L      1.2; 
      BLD   103; 
      A     "IDB_1100".QX_Ack; 
      =     L      1.3; 
      BLD   103; 
      CALL "Func_SEWInterface" (
           Iw_Addr                  := 415,
           Ix_Fwd                   := L      1.0,
           Ix_Bwd                   := L      1.1,
           Ix_Quick_Stop            := L      1.2,
           Ix_Reset                 := L      1.3,
           Iw_Speed_mmPerSecPositiv := 700,
           Iw_Cfg_MaxFreq           := 53,
           Iw_Cfg_MaxSpeed          := 1350,
           Iw_Ramp_mmPerS2          := 1500,
           Qx_Rdy                   := "IDB_1115".ix_DrvRdy,
           Qx_Err                   := #dummy);
      NOP   0; 
NETWORK
TITLE =1117 - MT Conveyor Module 1117
// ProductID: KRC
// Power-Bus: 1SB12
      A     "1117_ix_StpFr"; 
      =     L      1.0; 
      BLD   103; 
      A     "1117_ix_MtSw"; 
      =     L      1.4; 
      BLD   103; 
      A     "1117_ix_CcRdy"; 
      =     L      1.5; 
      BLD   103; 
      AN    "IDB_1119".QX_StatDrvFwd; 
      A     "1117_ix_StpFr"; 
      =     L      2.2; 
      BLD   103; 
      A     "=F101+1115-B4033:4"; 
      =     L      2.3; 
      BLD   103; 
      CALL "FB_1600_ConvMultiKdr" , "IDB_1117" (
           IW_HsFro                 := 1,
           iw_CtlToPlc              := "1117_iw_CtlToPlc",
           ix_StpFr                 := L      1.0,
           ix_MtSw                  := L      1.4,
           ix_CcRdy                 := L      1.5,
           IX_Lock                  := L      2.2,
           IX_ResetESM              := L      2.3,
           qd_PlcToCtl              := "1117_qd_PlcToCtl",
           QX_StatDrvFwd            := "IDB_1117".QX_StatDrvFwd,
           QX_StatDrvBwd            := "IDB_1117".QX_StatDrvBwd,
           QX_TORdy                 := "IDB_1117".QX_TORdy,
           QX_HORdy                 := "IDB_1117".QX_HORdy,
           QW_FillLvl               := "IDB_1117".QW_FillLvl,
           QX_TrspActive            := "IDB_1117".QX_TrspActive,
           QX_TrspFro               := "IDB_1117".QX_TrspFro,
           QX_Msg                   := "IDB_1117".QX_Msg,
           QX_Err                   := "IDB_1117".QX_Err);

      NOP   0; 
NETWORK
TITLE =F101.1119 > F301.1141

// Handshake
// IN
      L     IW  1500; 
      T     DB2060.DBW 1692; // DB_HsRearFro. Mod[1119].HS.Dir1.In

// OUT
      L     DB2060.DBW 1690; // DB_HsRearFro. Mod[1119].HS.Dir1.Out
      T     QW  1500; 
NETWORK
TITLE =1119 - Belt Conveyor Module 1119
// ProductID: GF
// Power-Bus: 1SB12
      A     "=F101+1119-B4033:4"; 
      =     L      1.0; 
      BLD   103; 
      A     "IDB_1119".ix_DrvRdy; 
      =     L      1.3; 
      BLD   103; 
      A     "=F101+1119-U4000-Q1:14"; 
      =     L      1.4; 
      BLD   103; 
      A     "1117_ix_StpFr"; 
      =     L      2.1; 
      BLD   103; 
      CALL "FB_1400_ConvMulti" , "IDB_1119" (
           IW_HsFro                 := 1119,
           ix_StpFr                 := L      1.0,
           ix_DrvRdy                := L      1.3,
           ix_MtSw                  := L      1.4,
           IX_ResetESM              := L      2.1,
           qx_DrvCtl1               := "IDB_1119".qx_DrvCtl1,
           qx_DrvCtl2               := "IDB_1119".qx_DrvCtl2,
           qx_DrvCtl3               := "IDB_1119".qx_DrvCtl3,
           qx_DrvCtl4               := "IDB_1119".qx_DrvCtl4,
           QX_StatDrvFwd            := "IDB_1119".QX_StatDrvFwd,
           QX_StatDrvBwd            := "IDB_1119".QX_StatDrvBwd,
           QX_TORdy                 := "IDB_1119".QX_TORdy,
           QX_HORdy                 := "IDB_1119".QX_HORdy,
           QX_TrspActive            := "IDB_1119".QX_TrspActive,
           QX_TrspFro               := "IDB_1119".QX_TrspFro,
           QX_Msg                   := "IDB_1119".QX_Msg,
           QX_Err                   := "IDB_1119".QX_Err);
      NOP   0; 
NETWORK
TITLE =1119 - SEW interface

      A     "IDB_1119".qx_DrvCtl1; 
      =     L      1.0; 
      BLD   103; 
      A     "IDB_1119".qx_DrvCtl2; 
      =     L      1.1; 
      BLD   103; 
      A     "State_1"; 
      =     L      1.2; 
      BLD   103; 
      A     "IDB_1100".QX_Ack; 
      =     L      1.3; 
      BLD   103; 
      CALL "Func_SEWInterface" (
           Iw_Addr                  := 422,
           Ix_Fwd                   := L      1.0,
           Ix_Bwd                   := L      1.1,
           Ix_Quick_Stop            := L      1.2,
           Ix_Reset                 := L      1.3,
           Iw_Speed_mmPerSecPositiv := 700,
           Iw_Cfg_MaxFreq           := 52,
           Iw_Cfg_MaxSpeed          := 1425,
           Iw_Ramp_mmPerS2          := 1500,
           Qx_Rdy                   := "IDB_1119".ix_DrvRdy,
           Qx_Err                   := #dummy);
      NOP   0; 
NETWORK
TITLE =SAV Custom Errors/Messages
//// SAV LAC Errors
//// XXX
////      A     XXX
////      =     "IDB_1120".Err.E01.B01_Spare
//// XXX
////      A     XXX
////      =     "IDB_1120".Err.E01.B02_Spare
//// XXX
////      A     XXX
////      =     "IDB_1120".Err.E01.B03_Spare
//// XXX
////      A     XXX
////      =     "IDB_1120".Err.E01.B04_Spare
//// XXX
////      A     XXX
////      =     "IDB_1120".Err.E01.B05_Spare
////-------------------------------------------
//// SAV LAC Messages
//// XXX
////      A     XXX
////      =     "IDB_1120".Msg.M01.B02_Spare
//// XXX
////      A     XXX
////      =     "IDB_1120".Msg.M01.B03_Spare
//// XXX
////      A     XXX
////      =     "IDB_1120".Msg.M01.B04_Spare
//// XXX
////      A     XXX
////      =     "IDB_1120".Msg.M01.B05_Spare
//// XXX
////      A     XXX
////      =     "IDB_1120".Msg.M01.B06_Spare
//


NETWORK
TITLE =End



END_FUNCTION

